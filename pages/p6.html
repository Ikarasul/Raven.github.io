<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Focus Studio - Raven.Space</title>


    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;700;800&family=Prompt:wght@400;500;600;700&display=swap"
        rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="../js/theme.js"></script>
    <script src="../js/nav.js"></script>


    <style>
        body {
            font-family: 'Outfit', 'Prompt', sans-serif;
            color: #475569;
            background: #fffbeb;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .sky-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: linear-gradient(180deg, #bae6fd 0%, #fff7ed 60%, #fffbeb 100%);
        }

        .sun-orb {
            position: absolute;
            top: -100px;
            right: -100px;
            width: 600px;
            height: 600px;
            background: radial-gradient(circle, rgba(253, 224, 71, 0.4) 0%, rgba(253, 224, 71, 0) 70%);
            border-radius: 50%;
            pointer-events: none;
            animation: sunPulse 10s ease-in-out infinite;
        }

        @keyframes sunPulse {

            0%,
            100% {
                transform: scale(1);
                opacity: 0.8;
            }

            50% {
                transform: scale(1.1);
                opacity: 0.6;
            }
        }

        .card-soft {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(12px);
            border-radius: 2rem;
            border: 2px solid #fff;
            box-shadow: 0 10px 30px -10px rgba(186, 230, 253, 0.5);
        }

        .timer-blob {
            background: white;
            border-radius: 3rem;
            padding: 2rem 3rem;
            text-align: center;
            box-shadow: 0 20px 50px -20px rgba(251, 146, 60, 0.3);
        }

        .time-text {
            font-size: 5rem;
            font-weight: 800;
            color: #3b82f6;
            line-height: 1;
            font-variant-numeric: tabular-nums;
            letter-spacing: -2px;
        }

        .btn-pop {
            width: 64px;
            height: 64px;
            border-radius: 2rem;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            transition: all 0.2s;
            cursor: pointer;
            box-shadow: 0 10px 20px -5px rgba(0, 0, 0, 0.1);
        }

        .btn-pop:hover {
            transform: translateY(-4px) scale(1.1);
        }

        .btn-pop:active {
            transform: scale(0.9);
        }

        .btn-play {
            background: #3b82f6;
            color: white;
            box-shadow: 0 15px 30px -10px rgba(59, 130, 246, 0.4);
        }

        .btn-play.active {
            background: #f59e0b;
        }

        .btn-sub {
            background: white;
            color: #94a3b8;
        }

        .tag-pill {
            padding: 6px 14px;
            border-radius: 100px;
            font-weight: 700;
            font-size: 0.8rem;
            color: #64748b;
            background: rgba(255, 255, 255, 0.5);
            cursor: pointer;
            transition: all 0.2s;
        }

        .tag-pill.active {
            background: white;
            color: #3b82f6;
            box-shadow: 0 5px 15px -5px rgba(59, 130, 246, 0.3);
            transform: scale(1.05);
        }

        .music-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
            padding: 12px;
            border-radius: 1.5rem;
            background: white;
            transition: all 0.2s;
            cursor: pointer;
            border: 2px solid transparent;
            text-align: center;
            position: relative;
        }

        .music-item:hover {
            border-color: #bae6fd;
            transform: translateY(-2px);
            box-shadow: 0 10px 20px -5px rgba(186, 230, 253, 0.4);
        }

        .music-item.active-music {
            background: #eff6ff;
            border-color: #3b82f6;
            box-shadow: 0 0 0 2px #3b82f6;
        }

        .music-icon {
            width: 48px;
            height: 48px;
            border-radius: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin: 0 auto;
            pointer-events: none;
        }


        .vol-btn {
            width: 36px;
            height: 36px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: #64748b;
            background: white;
            border: 1px solid #e2e8f0;
            transition: all 0.2s;
        }

        .vol-btn:hover {
            background: #f1f5f9;
            color: #3b82f6;
            border-color: #3b82f6;
        }

        .vol-btn:active {
            transform: scale(0.95);
        }

        .input-friendly {
            background: white;
            border-radius: 1.5rem;
            padding: 0.8rem 1.5rem;
            width: 100%;
            text-align: center;
            font-size: 1.1rem;
            font-weight: 600;
            color: #475569;
            outline: none;
            box-shadow: 0 5px 20px -5px rgba(0, 0, 0, 0.05);
        }

        .input-friendly:focus {
            box-shadow: 0 10px 30px -5px rgba(186, 230, 253, 0.4);
        }
    </style>
</head>

<body class="selection:bg-yellow-200 selection:text-yellow-900 pb-20">


    <div class="sky-bg">
        <div class="sun-orb"></div>
    </div>


    <div class="min-h-screen max-w-5xl mx-auto p-6 pt-10 grid lg:grid-cols-2 gap-10 items-center animate-enter">



        <div class="flex flex-col items-center">

            <div class="mb-8 w-full max-w-sm"><input type="text" id="task-input" placeholder="✨ Focus Goal..."
                    class="input-friendly"></div>

            <div class="timer-blob mb-10 w-full max-w-xs">
                <div class="time-text" id="time-display">25:00</div>
                <div class="flex justify-center gap-2 mt-4">
                    <button onclick="setMode('focus')" id="tag-focus" class="tag-pill active">Focus</button>
                    <button onclick="setMode('short')" id="tag-short" class="tag-pill">Short</button>
                    <button onclick="setMode('long')" id="tag-long" class="tag-pill">Long</button>
                </div>
            </div>

            <div class="flex items-center gap-6">
                <button onclick="resetTimer()" class="btn-pop btn-sub"><i data-lucide="rotate-ccw"
                        width="24"></i></button>
                <button onclick="toggleTimer()" id="main-btn" class="btn-pop btn-play"><i data-lucide="play" width="28"
                        class="ml-1"></i></button>
                <button onclick="skipPhase()" class="btn-pop btn-sub"><i data-lucide="fast-forward"
                        width="24"></i></button>
            </div>

            <div class="mt-10 flex gap-8 opacity-60">
                <div class="text-center">
                    <div class="text-2xl font-bold" id="session-count">0</div>
                    <div class="text-[10px] font-bold uppercase tracking-widest">Sessions</div>
                </div>
                <div class="text-center">
                    <div class="text-2xl font-bold"><span id="total-hours">0.0</span>h</div>
                    <div class="text-[10px] font-bold uppercase tracking-widest">Hours</div>
                </div>
            </div>

        </div>



        <div class="space-y-6">
            <div class="card-soft p-6">

                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-bold text-slate-700 flex items-center gap-2">
                        <i data-lucide="music" width="20" class="text-pink-400"></i> Vibes
                    </h3>


                    <div class="flex items-center gap-2 bg-slate-50 p-1.5 rounded-xl border border-slate-200">
                        <button onclick="changeVolume(-10)" class="vol-btn"><i data-lucide="minus"
                                width="14"></i></button>
                        <div class="w-8 text-center font-bold text-sm text-slate-600" id="vol-display">50%</div>
                        <button onclick="changeVolume(10)" class="vol-btn"><i data-lucide="plus"
                                width="14"></i></button>
                    </div>
                </div>


                <div class="mb-4 rounded-2xl overflow-hidden bg-slate-900 shadow-inner relative aspect-video">

                    <iframe id="yt-embed" class="w-full h-full"
                        src="https://www.youtube.com/embed/n61ULEU7CO0?enablejsapi=1&controls=0&modestbranding=1"
                        frameborder="0" allow="autoplay; encrypted-media"></iframe>

                    <div class="absolute inset-0 border-4 border-white/10 rounded-2xl pointer-events-none"></div>
                </div>


                <div class="flex gap-2 mb-4">
                    <input type="text" id="yt-url" placeholder="YouTube Link"
                        class="bg-white text-xs w-full px-4 py-2 rounded-xl outline-none border border-slate-100 focus:border-blue-300">
                    <button onclick="loadUserVideo()"
                        class="bg-blue-500 text-white rounded-xl w-10 flex items-center justify-center hover:bg-blue-600 shadow-sm"><i
                            data-lucide="play" width="14"></i></button>
                </div>


                <div class="grid grid-cols-2 gap-3">
                    <div onclick="playPreset('lofi')" id="btn-lofi" class="music-item">
                        <div class="music-icon bg-orange-100 text-orange-500"><i data-lucide="coffee" width="20"></i>
                        </div>
                        <div class="text-xs font-bold text-slate-600">Lofi Girl (Static)</div>
                    </div>
                    <div onclick="playPreset('jazz')" id="btn-jazz" class="music-item">
                        <div class="music-icon bg-blue-100 text-blue-500"><i data-lucide="cloud-rain" width="20"></i>
                        </div>
                        <div class="text-xs font-bold text-slate-600">Cafe Jazz (BGM)</div>
                    </div>
                    <div onclick="playPreset('ghibli')" id="btn-ghibli" class="music-item">
                        <div class="music-icon bg-green-100 text-green-500"><i data-lucide="leaf" width="20"></i></div>
                        <div class="text-xs font-bold text-slate-600">Ghibli Piano (Cover)</div>
                    </div>
                    <div onclick="playPreset('synth')" id="btn-synth" class="music-item">
                        <div class="music-icon bg-purple-100 text-purple-500"><i data-lucide="zap" width="20"></i></div>
                        <div class="text-xs font-bold text-slate-600">Synthwave (Mix)</div>
                    </div>
                </div>

            </div>
        </div>

    </div>


    <script>


        const STREAMS = {




        };


        let player = null;
        let currentVol = 50;

        function playPreset(cat) {

            document.querySelectorAll('.music-item').forEach(el => el.classList.remove('active-music'));
            const btn = document.getElementById(`btn-${cat}`);
            if (btn) btn.classList.add('active-music');


            const vid = STREAMS[cat];
            changeSource(vid);
        }

        function loadUserVideo() {
            const val = document.getElementById('yt-url').value;
            const id = val.match(/(?:v=|\/)([0-9A-Za-z_-]{11}).*/)?.[1];
            if (id) {
                document.querySelectorAll('.music-item').forEach(el => el.classList.remove('active-music'));
                changeSource(id);
            } else { alert("Invalid YouTube Link"); }
        }

        function changeSource(id) {
            const iframe = document.getElementById('yt-embed');

            iframe.src = `https://www.youtube.com/embed/${id}?autoplay=1&enablejsapi=1&t=${Date.now()}`;


            setTimeout(() => {
                if (window.YT && window.YT.Player) {
                    player = new YT.Player('yt-embed', {
                        events: { 'onReady': (e) => e.target.setVolume(currentVol) }
                    });
                }
            }, 1500);
        }

        function changeVolume(delta) {
            currentVol = Math.min(100, Math.max(0, currentVol + delta));
            document.getElementById('vol-display').innerText = currentVol + '%';
            if (player && player.setVolume) player.setVolume(currentVol);
        }


        let tId = null, tLeft = 1500, tMode = 'focus', tRun = false, sess = 0, mins = 0;
        const eTime = document.getElementById('time-display'), eBtn = document.getElementById('main-btn');

        function toggleTimer() {
            if (tRun) { clearInterval(tId); tRun = false; eBtn.classList.remove('active'); eBtn.innerHTML = '<i data-lucide="play" width="28" class="ml-1"></i>'; }
            else { tId = setInterval(() => { if (tLeft > 0) { tLeft--; updT(); } else { nextPh(); } }, 1000); tRun = true; eBtn.classList.add('active'); eBtn.innerHTML = '<i data-lucide="pause" width="28"></i>'; }
            lucide.createIcons();
        }

        function resetTimer() { clearInterval(tId); tRun = false; setMode(tMode); }
        function skipPhase() { clearInterval(tId); setMode(tMode === 'focus' ? 'short' : 'focus'); }

        function setMode(m) {
            tMode = m; tLeft = m === 'focus' ? 1500 : (m === 'short' ? 300 : 900);
            document.querySelectorAll('.tag-pill').forEach(e => e.classList.remove('active'));
            document.getElementById(`tag-${m}`).classList.add('active');
            eTime.style.color = (m === 'focus' ? '#3b82f6' : (m === 'short' ? '#10b981' : '#f59e0b'));
            resetTimer(); updT(); eBtn.classList.remove('active');
        }

        function updT() {
            const m = Math.floor(tLeft / 60).toString().padStart(2, '0'), s = (tLeft % 60).toString().padStart(2, '0');
            eTime.textContent = `${m}:${s}`; document.title = `${m}:${s} ☀️`;
        }
        function nextPh() {
            clearInterval(tId); tRun = false; new Audio('https://actions.google.com/sounds/v1/alarms/beep_short.ogg').play();
            if (tMode === 'focus') { sess++; mins += 25; document.getElementById('session-count').innerText = sess; document.getElementById('total-hours').innerText = (mins / 60).toFixed(1); setMode('short'); }
            else setMode('focus');
        }

        document.addEventListener('DOMContentLoaded', () => {
            if (!window.YT) { const s = document.createElement('script'); s.src = "https://www.youtube.com/iframe_api"; document.head.appendChild(s); }
            lucide.createIcons();
        });

    </script>
</body>

</html>